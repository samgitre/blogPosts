{"version":3,"sources":["../../src/controller/blogPostController.js"],"names":["config","dbConfig","route","Router","post","req","res","newPost","Blog","title","body","blogText","save","err","send","json","message","get","find","allBlogs","findById","params","id","blogFound","delete","remove","_id","postId","findOne","postFound","update","blogPost","$set","likes","put","success"],"mappings":"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","file":"blogPostController.js","sourcesContent":["\nimport mongoose from 'mongoose';\nimport express from 'express';\nimport Posts  from '../models/blogPostModels';\n\n\nexport default({config, dbConfig}) =>{\n  let route = express.Router();\n\n  //creating blog post.\n\n  route.post('/createBlog', (req, res) => {\n    let newPost = new Blog({\n      title : req.body.title,\n      blogText: req.body.blogText\n    });\n    newPost.save((err) => {\n      if(err){\n        res.send(err);\n      }\n      res.json({message : 'blog posted successfully'});\n    });\n  });\n\n//get all blog post\n  route.get('/', (req,res) => {\n    Posts .find({}, (err, allBlogs) => {\n      if(err){\n        res.send(err);\n      }\n      res.json(allBlogs);\n    });\n  });\n\n // get blog post by Id\n  route.get('/:id', (req,res) => {\n    Posts .findById(req.params.id, (err, blogFound) => {\n      if(err){\n        res.send(err);\n      }\n      res.json(allBlogs);\n    });\n  });\n\n //delete blog post\n  route.delete('/:id', (req,res) => {\n    Posts .remove({_id : req.params.id}, (err) => {\n      if(err){\n        res.send(err);\n      }\n      res.json({message: 'blog post has been deleted successfully'});\n    });\n  });\n\n//likeing blog post.\n  route.post('/like', (req, res) => {\n    let postId = req.params.id;\n    Posts.findOne({_id:postId}, (err, postFound) => {\n      if(err){\n        res.send(err);\n      }\n      Posts.update({_id:blogPost},\n        {$set:{likes: postFound.likes += 1}}, (err) => {\n          if(err){\n            res.send(err);\n          }\n          res.json({message :'Thanks for liking this comment!'});\n\n        });\n    });\n  });\n\n//dislikeing blog post.\n  route.post('/dislike', (req, res) => {\n    let postId = req.params.id;\n    Posts.findOne({_id:postId}, (err, postFound) => {\n      if(err){\n        res.send(err);\n      }\n      Posts.update({_id:blogPost},\n        {$set:{likes: postFound.likes -= 1}}, (err) => {\n          if(err){\n            res.send(err);\n          }\n          res.json({message :'unliked !!!'});\n        });\n    });\n  });\n\n   //api/blogPost/:id (Updating blog post)\n  route.put('/:id',(req,res) => {\n    Posts .find(req.params.id,(err,blogFound) => {\n      if(err){\n        res.send(err);\n      }\n      Blog.title = req.body.title,\n      Blog.blogText = req.body.blogText\n    });\n    Blog.save((err, success) => {\n      if(err){\n        res.send(err);\n      }\n      res.json({message :'blog post has been update successfully'});\n    });\n  });\n  return route;\n}\n"]}